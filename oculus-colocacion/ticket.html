<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>ğŸŸï¸ Ticket de salida VR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body class="dark-theme">
  <header class="topbar">
    <div class="topbar-left">
      <button class="btn-icon" onclick="location.href='index.html'">ğŸ </button>
      <span class="brand"><strong>Ticket de salida</strong><br/><small>Experiencia VR Sala SEM</small></span>
    </div>
  </header>
  <main id="main-content">
    <section class="cards-grid">
      <article class="card">
        <h2>ğŸŸï¸ Â¿CÃ³mo me sentÃ­ con el visor?</h2>
        <p>Elige un carita y, si quieres, escribe o dibuja cÃ³mo te sentiste.</p>
        <div style="display:flex;gap:0.6rem;flex-wrap:wrap;">
          <button class="btn-main" onclick="setFace('feliz')">ğŸ˜Š Me gustÃ³ mucho</button>
          <button class="btn-ghost" onclick="setFace('normal')">ğŸ˜ MÃ¡s o menos</button>
          <button class="btn-ghost" onclick="setFace('triste')">ğŸ˜Ÿ No me sentÃ­ bien</button>
        </div>
        <br/>
        <label>
          Comentario breve (puede escribir BelÃ©n)<br/>
          <textarea id="ticket-text" rows="3"></textarea>
        </label>
        <br/><br/>
        <button class="btn-chip" onclick="saveTicket()">ğŸ’¾ Guardar como texto</button>
        <p id="ticket-msg" style="font-size:0.8rem;margin-top:0.4rem;"></p>
      </article>
    </section>
  </main>
  <script>
    let selectedFace = '';
    function setFace(face) {
      selectedFace = face;
      document.getElementById('ticket-msg').textContent = 'Seleccionaste: ' + face + '. Ahora puedes escribir un comentario.';
    }
    function saveTicket() {
      if (!selectedFace) {
        alert('Elige una carita primero.');
        return;
      }
      const txt = document.getElementById('ticket-text').value.trim().replace(/(\r|\n)+/g,' ');
      const line = `carita=${selectedFace}, comentario="${txt}"`;
      const blob = new Blob([line], { type: 'text/plain;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      const today = new Date().toISOString().slice(0,10).replace(/-/g,'');
      a.href = url;
      a.download = `ticket_salida_vr_${today}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      document.getElementById('ticket-msg').textContent = 'Ticket guardado. Puedes subirlo o guardarlo en tu carpeta digital.';
    }
  </script>
<footer class="footer">
  <span>Centro de Recursos VR Inclusivos Â· Neotech EduLab</span>
  <span class="footer-logo"><img src="../assets/img/logo_NEOTECH-EDULAB.png" alt="Neotech EduLab" /></span>
</footer>
</body>
</html>
